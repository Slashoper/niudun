测试用户的网络 
 用户-节点
http://www.newdefend.com/check_cdn_health.html

第三方检测工具
www.17ce.com
tool.chinaz.com/speedtest.aspx            节点全国分布情况
www.alibench.com/
ce.cloud.360.cn/

http://whois.cndns.com/

218.77.45.137
123.232.20.110
58.243.186.122	
171.15.195.221
IP白名单

输入的IP将不会被拦截

111.40.85.62
IP黑名单

输入的IP将会被拦截

106.187.97.172

218.77.45.137

171.221.241.12

58.243.186.122

122.5.17.230



dig @用户使用的DNS 源站域名
节点-〉源站
curl -x 节点ip:端口源站域名 -Is |grep HTTP



提示：要指向目标IP地址，选择类型[A]，要指向一个域名，选择类型[CNAME]。类型间的互斥关系，请查看这里

A：地址记录，用来指定域名的IPv4地址（如：8.8.8.8），如果需要将域名指向一个IP地址，就需要添加A记录。
CNAME： 如果需要将域名指向另一个域名，再由另一个域名提供ip地址，就需要添加CNAME记录。
NS：域名服务器记录，如果需要把子域名交给其他DNS服务商解析，就需要添加NS记录。
MX：如果需要设置邮箱，让邮箱能收到邮件，就需要添加MX记录。
TXT：在这里可以填写任何东西，长度限制255。绝大多数的TXT记录是用来做SPF记录（反垃圾邮件）。
AAAA：用来指定主机名（或域名）对应的IPv6地址（例如：ff06:0:0:0:0:0:0:c3）记录。
LINK：CloudXNS的私有类型，可将用户配置的CNAME隐藏。
AX：CloudXNS的私有类型，可以填写优先级（即承担访问的百分比），单条AX记录与A记录效果一样。
CNAMEX：CloudXNS的私有类型，可以填写优先级（即承担访问的百分比），单条CNAMEX记录效果同CNAME。
SRV：记录了哪台计算机提供了哪个服务。格式为：服务的名字、点、协议的类型，例如：_xmpp-server._tcp。
301跳转：从一个地址301重定向到另一个地址。注:仅已备案域名可使用。
302跳转：从一个地址302重定向到另一个地址。注:仅已备案域名可使用。
隐式跳转：用FRAME的形式，调用跳转地址，达到隐藏跳转地址目的。注:仅已备案域名可使用。

日志字段含义
clientip  客户端ip
domain    域名
hit_status 缓存状态（HIT-缓存 MISS-没缓存 BYPASS-不缓存回源 EXPIRE-缓存过期）
host      waf节点主机名
method    请求方法
p_response_time    父层/源站 响应时间
p_server  父层/源站 ip地址:端口
p_status  父层/源站 响应状态码
protocol  HTTP协议
referer   从哪个页面链接过来的
request   请求uri
size      请求body大小
ss        waf节点响应时间
status    waf节点响应状态码
time      请求发起时间


错误代码
403    防盗链/源站           555    waf拦截 节点
           500    nginx/源站             5XX    nginx/源站
HTTP status：                                           HTTP状态: 
|“100”;继续 
|“101”;交换协议 
|“200”,好的 
|“201”;创建 
|“202”;接受 
|“203”;那些信息 
|“204”,没有内容 
|“205”;重置内容 
|“206”,部分内容 
|“300”,多个选择 
|“301”;永久移动 
|“302”,暂时转移 
|“303”;看到其他 
|“304”,没有修改 
|“305”;使用代理 
|“400”;坏的请求 
|“401”;未经授权 
|“402”,要求付款 
|“403”;禁止的 
|“404”,没有找到 
|“405”;法不允许的 
|“406”,不能接受的 
|“407”;代理认证要求 
|“408”;请求暂停 
|“409”;冲突 
|“410”,走了 
|“411”;所需长度 
|“412”;失败的先决条件 
|“413”;请求实体太大 
|“414”;要求通用太大 
|“415”,不支持的媒体类型 
|“500”;内部服务器错误 
|“501”,没有实现 
|“502”;坏的网关 
|“503”;服务不可用 
|“504”;网关超时 
|“505”;HTTP版本不支持
| “100″ ; Continue
| “101″ ; Switching Protocols
| “200″ ; OK
| “201″ ; Created       
| “202″ ; Accepted
| “203″ ; Non-Authoritative Information
| “204″ ; No Content
| “205″ ; Reset Content
| “206″ ; Partial Content
| “300″ ; Multiple Choices
| “301″ ; Moved Permanently
| “302″ ; Moved Temporarily
| “303″ ; See Other
| “304″ ; Not Modified
| “305″ ; Use Proxy
| “400″ ; Bad Request
| “401″ ; Unauthorized
| “402″ ; Payment Required
| “403″ ; Forbidden
| “404″ ; Not Found
| “405″ ; Method Not Allowed
| “406″ ; Not Acceptable
| “407″ ; Proxy Authentication Required
| “408″ ; Request Time-out
| “409″ ; Conflict
| “410″ ; Gone
| “411″ ; Length Required
| “412″ ; Precondition Failed
| “413″ ; Request Entity Too Large
| “414″ ; Request-URI Too Large
| “415″ ; Unsupported Media Type
| “500″ ; Internal Server Error
| “501″ ; Not Implemented
| “502″ ; Bad Gateway
| “503″ ; Service Unavailable
| “504″ ; Gateway Time-out
| “505″ ; HTTP Version not supported





CNAME接入优点：生效时间更快，且操作简单，适合正在遭受攻击的网站使用。不便之处：部分网站使用的dns服务器不支持顶级域名@做cname解析，如果需要防御顶级域名@，相对比较麻烦。
NS接入优点：方便网站管理，且可免费使用小量dns防查询攻击。不便之处：生效时间较慢。

用户――本地dns――中心dns分析用户来源位置――牛盾最近缓存节点――中心缓存节点――源站




审核规范
1. 未取得ICP备案号的网站不允许使用国内安全节点。
2. 网站打不开或无任何实际内容，导致无法判断网站运营范围的网站不允许通过。
3. 网站内容以外文为主且非中文网站不允许通过。
4. 相关机构提示网页有威胁的，有非法信息提示不允许通过。
5. 医院类型网站（流产，皮肤病，性病等医院），未获得卫生部资质网站，不允许通过。
6. 网站主体内容含有色情（视频交友，一夜情交友）、违法（办假证，贩卖仿真枪）、黑客（非技术交流网站）、钓鱼网站、游戏私服、游戏外挂、网赚（传销性质网站）、成人用品、保健用品（减肥药）、两性、美女贴图和动漫贴图（尺度过大）、赌博（含贩卖赌博工具。）等低俗内容。
7. 网站存在恶意流氓广告（存在非法内容视频链接，非法网页内容链接）。不允许通过。
8. 网站内容存在版权风险的网站（视频，小说，音乐网站）不允许通过。
9.网站含有药品销售、保健品销售，但未取得资质的，或严重夸大药效事实。不允许通过。
10.网站主要业务为向非法网站提供支付、交易平台、担保，代理外国金融理财（炒股，炒现货，炒黄金）等服务的网站。不允许通过。
11.网站中大量存在影响社会和谐稳定的内容的网站（涉嫌攻击国家，攻击领导人，攻击人民，言论煽动性质网站）。不允许通过。





审核
http://manage.anquan.io/

节点流量
http://smokeping.anquan.io/smokeping/
监控
http://zabbix.anquan.io/
es日志
http://es.anquan.io/
资产
http://cmdb.anquan.io/
BOSS
https://cdnboss.fastweb.com.cn


QQ
1.审核
2.用户常见问题解答：

    用户→节点之间的连接：
   是否接入了牛盾DNS（ns找域名服务商改dns服务器，cname找域名解析商改牛盾提供的别名）
站长工具查看网站的接入DNS是否为牛盾dns
    https证书





202.85.220.92 zabbix.anquan.io
202.85.220.92 cmdb.anquan.io
202.85.220.92 smokeping.anquan.io
202.85.220.92 es.anquan.io
#202.85.220.92 manage.anquan.io


代理：
jibw
|h9Bs3hjB

zabbix:
fastsec
shellc0de!@#$ASDF

审核
jibw@fastweb.com.cn
MO14Tt

资产

QQ
1002@800109969
r9CliUvRsxqDGkI

iKp*h%sxRAwe%YmC



CC攻击及牛盾防御

CC攻击的原理就是攻击者控制某些主机不停地发大量数据包给对方服务器造成服务器资源耗尽，一直到宕机崩溃。CC主要是用来攻击页面的，每个人都有这样的体验：当一个网页访问的人数特别多的时候，打开网页就慢了，CC就是模拟多个用户（多少线程就是多少用户）不停地进行访问那些需要大量数据操作（就是需要大量CPU时间）的页面，造成服务器资源的浪费，CPU长时间处于100%，永远都有处理不完的连接直至就网络拥塞，正常的访问被中止。

客户端每次请求我们服务器都有客户端的IP地址和他们浏览器的特征，以及他们请求的URL。我们根据IP地址和浏览器特征为一个维度，也根据客户端IP地址和对同一个请求URL在一分钟内的请求频率，来判定是否疑似CC攻击 ，如果频率过高，超过我们预设的阀值则认为疑似CC攻击，会向客户端下次请求的响应里植入一串特定代码，如果客户端能够正常解析则放过，如果不能正常解析的客户端，则判定为CC攻击。阻断客户端请求
 
WEB漏洞及牛盾防御

WEB漏洞通常是指网站程序上的漏洞，可能是由于代码编写者在编写代码时考虑不周全等原因而造成的漏洞，常见的WEB漏洞有Sql注入、Xss漏洞、上传漏洞等。如果网站存在WEB漏洞并被黑客攻击者利用，攻击者可以轻易控制整个网站，并可进一步提权获取网站服务器权限，控制整个服务器。

牛盾云防御平台，可以有效识别黑客攻击，同时独有的主动防御功能可以发现并拦截零日漏洞，有效保护网站安全。
 恶意扫描及牛盾防御

目前恶意扫描已经成为最常见的黑客攻击手段之一。恶意网击者为了能够快速发现目标网站漏洞进而入侵，已经从简单的手动入侵发展到了黑客工具的恶意自动化扫描阶段。通过高频率的自动化黑客工具扫描能够快速发现网站存在的漏洞，并进一步定点入侵。
      牛盾云防御
平台，能够防御超过数万种常见黑客工具扫描攻击，避免网站受到破坏。快速记录攻击源IP，反馈给网站管理员，帮助网站发现问题所在。
页面篡改及牛盾防御

黑客攻击者在攻陷目标网站时，往往为了长期获益，不会直接完全破坏源网站。他们往往是通过对网站原有内容的篡改欺骗网站访客扩大受害群体。
       牛盾云防御平台，能够完全隐藏原服务器IP，让黑客根本无法接触到原网站数据，从而保护了网站数据安全。
防攻击

黑客攻击者在攻陷目标网站时，往往为了长期获益，不会直接完全破坏源网站。他们往往是通过对网站原有内容的篡改欺骗网站访客扩大受害群体。
       牛盾云防御平台，能够完全隐藏原服务器IP，让黑客根本无法接触到原网站数据，从而保护了网站数据安全。
DDOS攻击及牛盾防御功能用途：

DDoS攻击通过大量合法的请求占用大量网络资源，以达到瘫痪网络的目的。这种攻击方式可分为以下几种：
1.      通过使网络过载来干扰甚至阻断正常的网络通讯。
2.      通过向服务器提交大量请求，使服务器超负荷。
3.      阻断某一用户访问服务器。
4.      阻断某服务与特定系统或个人的通讯。
      牛盾云防御平台，利用多节点优势及独有的智能攻击识别技术，可以快速定位黑客攻击源IP，在15分钟内完全拦截DDOS攻击，保护网站安全。
牛盾如何抗DDoS攻击功能用途：

我们的全线节点都部署有我们自己研发的cc防御系统、synflood攻击防御系统、以及大流量清洗中心。
1.      首先针对最常见的应用层的cc攻击，常见的防御方式都是基于限速，植入js，验证码等方式进行鉴定处理。这几种技术都有其缺陷型：限速会误杀很多请求；js支持不好；验证码体验不好；封ip更是不可取。我们的cc防御策略是自研发的，基于多种安全策略和数据行为分析能够精确的区分攻击者和正常访客、爬虫的请求，并根据策略智能的进行阻断处理。
2.      synflood攻击是ddos流量型攻击中最常见效果最好的一种攻击方式，而牛盾全线都部署了自制的synflood防御系统。
3.      最后牛盾有200G的流量清洗中心，可以清洗各种类型的ddos攻击。
牛盾是怎么控制攻击的误拦率的

牛盾通过如下措施尽最大可能地避免误拦率的发生。
1.      牛盾内部有指纹自学习机制会把误报大大降低到最小；牛盾支持根据攻击状况，自动识别、调整策略规则，将拦截效率调整到最优。
2.      在默认情况下，可能发生与期望不一致的拦截，如果站长觉得有疑似误报的发生，可以在平台设置白名单，白名单中的IP将被直接放行。
3.      此外牛盾提供事后追查机制，所有的漏洞攻击拦截详情都会在日志分析页面详细呈现。




$sql="select username,pass from members where userid=".$_GET[userid];

$xx->query($sql); 



如何开启牛盾云加速?

只需修改您的域名的DNS设置，即可快速接入牛盾云加速。

目前，牛盾云加速提供NS和CNAME两种方式接入。

对于NS方式，需要您到您的域名服务商（通常是您注册该域名的网站）修改NS服务器地址(NameServer)，
修改成牛盾云加速的高防智能DNS服务器：
lv3ns1.ffdns.net
lv3ns2.ffdns.net

对于CNAME方式，需要您到您的域名解析管理（可能是注册域名的网站，也可能是您设置的其他域名解析服务商）设置CNAME解析记录，
将您需要接入的子域名设置CNAME指向牛盾云加速为您生成的域名即可。
生效时间
由于存在各级DNS缓存，每个服务商DNS切换时间不同，各地DNS刷新时间都是未知的，有的快，有的慢，所以请参考相应域名服务商的说明。

动态的CND业务不支持AX记录这种权重的轮询方式，那是传统的CDN业务。 只有A记录和cname记录支持开启牛盾

同一域名添加多个dns记录






如果您的服务器安装了安全软件或者开启了防火墙服务（例如：安全狗、冰盾、云盾、云锁、IPtables等）， 请您将牛盾云加速节点IP段加入白名单中，具体方法见帮助文档


用户出现无法访问的情况
1，检查节点到源站，
2，检查用户到节点
3，当前链路不通，尝试调整链路再测试。
